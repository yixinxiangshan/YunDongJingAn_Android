// Generated by CoffeeScript 1.9.1
(function() {
  var ECpageClass;

  ECpageClass = (function() {
    var root;

    root = {};

    ECpageClass.prototype._page_name = "";

    ECpageClass.prototype._content_info = {};

    ECpageClass.prototype._platform = "";

    ECpageClass.prototype._listview_data = {
      pullable: false,
      hasFooterDivider: true,
      hasHeaderDivider: true,
      dividerHeight: 0,
      dividerColor: "#EBEBEB",
      data: [
        {
          viewType: "ListViewCellLine",
          _rightLayoutSize: 0,
          _leftLayoutSize: 60,
          centerTitle: "正在加载......"
        }
      ]
    };

    ECpageClass.prototype._constructor = function(_page_name1) {
      this._page_name = _page_name1;
      root = this;
      this.prepareForInitView();
      $A().page().widget(this._page_name + "_ListViewBase_0").data(JSON.stringify(this._listview_data));
      $A().page().widget(this._page_name + "_ListViewBase_0").onItemInnerClick(function(data) {
        return root.onItemInnerClick(data);
      });
      $A().page().widget(this._page_name + "_ListViewBase_0").onItemClick(function(data) {
        return root.onItemClick(data);
      });
      return $A().page().onCreated(function() {
        return root.onCreated();
      });
    };

    function ECpageClass(_page_name) {
      this._constructor(_page_name);
    }

    ECpageClass.prototype.onCreated = function() {
      if ((root._platform != null) && root._platform === "ios") {
        $A().page().widget(this._page_name + "_ListViewBase_0").refreshData(JSON.stringify(this._listview_data));
      }
      return $A().app().log("-----------------------------------" + JSON.stringify(root._content_info));
    };

    ECpageClass.prototype.onItemClick = function(data) {};

    ECpageClass.prototype.onItemInnerClick = function(data) {};

    ECpageClass.prototype.onResume = function() {};

    ECpageClass.prototype.onResult = function(data) {};

    ECpageClass.prototype.prepareForInitView = function() {
      return $A().app().platform().then(function(platform) {
        return root._platform = platform;
      });
    };

    ECpageClass.prototype.showArticle = function(info) {
      var i, j, len, ref, time;
      root._listview_data.data = [
        {
          viewType: "ListViewCellGroupTitle",
          textTitle: "",
          _type: "_split"
        }, {
          viewType: "ListViewCellLine",
          _rightLayoutSize: 0,
          _leftLayoutSize: 80,
          _bottomDivider: {
            imageType: "assets",
            imageSize: "fitSize",
            imageSrc: "webview/images/icon/default/divider.png"
          },
          leftImage: {
            imageType: "imageServer",
            imageSize: "middle",
            imageSrc: info.course_info.image_cover.url
          },
          centerTitle: info.course_info.title,
          hasFooterDivider: "true"
        }
      ];
      ref = info.set_times;
      for (i = j = 0, len = ref.length; j < len; i = ++j) {
        time = ref[i];
        root._listview_data.data.push({
          viewType: "ListViewCellLine",
          _rightLayoutSize: 0,
          _leftLayoutSize: 20,
          _bottomDivider: {
            imageType: "assets",
            imageSize: "fitSize",
            imageSrc: "webview/images/icon/default/divider.png"
          },
          rightImage: {
            imageType: "assets",
            imageSize: "micro",
            imageSrc: "webview/images/icon/default/listview_right.png"
          },
          centerTitle: time.time_name + "时间",
          rightDes: time.content != null ? time.content : "未设置",
          item_setting: {
            fav_id: info.id,
            course_title: info.course_info.title,
            day_type: time.time_type,
            name: time.time_name,
            time_content: time.content
          },
          _type: "_item",
          hasFooterDivider: "true"
        });
      }
      root._listview_data.data.push({
        viewType: "ListViewCellGroupTitle",
        textTitle: "",
        _type: "_split"
      });
      root._listview_data.data.push({
        viewType: "ListViewCellLine",
        _rightLayoutSize: 0,
        _leftLayoutSize: 0,
        _bottomDivider: {
          imageType: "assets",
          imageSize: "fitSize",
          imageSrc: "webview/images/icon/default/divider.png"
        },
        centerBottomdes2: info.course_info.content,
        _centerBottomdes2Color: {
          _clickable: false,
          pressed: "#999999",
          selected: "#999999",
          normal: "#999999"
        },
        hasFooterDivider: "false"
      });
      root._listview_data.data.push({
        viewType: "ListViewCellButton",
        btnTitle: "取 消 课 程",
        btnType: "cancel",
        _type: "_cancel"
      });
      return $A().page().widget(root._page_name + "_ListViewBase_0").refreshData(JSON.stringify(root._listview_data));
    };

    return ECpageClass;

  })();

  new ECpageClass("page_send_info");

}).call(this);
